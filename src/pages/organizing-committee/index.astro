---
import Container from "@/components/primitives/Container.astro";
import CommitteeMemberCard, {
  type Member,
} from "@/components/sections/CommitteeMemberCard.astro";
import BaseLayout from "@/layouts/BaseLayout.astro";
const categories = [
  "Conference Chair",
  "Advisory Board",
  "Technical Program Committee",
  "Organizing Committee",
  "Programme Committee",
  "Publication Committee",
  "Financial Committee",
  "International Relations",
  "Publicity Committee",
  "Special Sessions",
  "Workshop Committee",
  "Awards Committee",
  "Poster Session Committee",
  "Local Organizing Committee",
  "Conference Secretariat",
  "Web Committee",
];

const members: Member[] = [
  // Conference Chairs
  {
    name: "Prof. Bandunee Athapattu",
    title: "Conference Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Conference Chair",
    image: "public/committee/default-avatar.png",
    country: "LK",
    email: "bcliy@ou.ac.lk",
    category: "Conference Chair",
  },
  {
    name: "Prof. Jagath Manatunge",
    title: "Conference Chair",
    affiliation: "University of Moratuwa",
    role: "Conference Chair",
    image: "./committee/default-avatar.png",
    country: "LK",
    email: "manatunge@uom.lk",
    category: "Conference Chair",
  },
  // TPC Chair
  {
    name: "Dr. L.S.K. Udugama",
    title: "TPC Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Technical Program Committee Chair",
    image: "./committee/Dr. L.S.K. Udugama.svg",
    country: "LK",
    email: "lsudu@ou.ac.lk",
    category: "Technical Program Committee",
  },
  {
    name: "Prof. Indika Perera",
    title: "TPC Co-Chair",
    affiliation: "University of Moratuwa",
    role: "Technical Program Committee Co-Chair",
    image: "./committee/Prof. Indika Perera.svg",
    country: "LK",
    email: "indikaperera@uom.lk",
    category: "Technical Program Committee",
  },
  {
    name: "Dr. Chandana Jayawardena",
    title: "TPC Co-Chair",
    affiliation: "",
    role: "Technical Program Committee Co-Chair",
    image: "./committee/default-avatar.png",
    country: "LK",
    category: "Technical Program Committee",
  },
  // Organizing Committee Chair
  {
    name: "Dr. Maneesha Caldera",
    title: "Organizing Committee Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Organizing Committee Chair",
    image: "./committee/Dr.-H.M.M.CALDERA.svg",
    country: "LK",
    email: "hmcal@ou.ac.lk",
    category: "Organizing Committee",
  },
  {
    name: "Dr. Ayomi Irugalbandara",
    title: "Organizing Committee Member",
    affiliation: "The Open University of Sri Lanka",
    role: "Organizing Committee Chair",
    image: "./committee/default-avatar.png",
    country: "LK",
    email: "hmcal@ou.ac.lk",
    category: "Organizing Committee",
  },
  // Programme Co-Chairs
  {
    name: "Prof. Uditha Ratnayake",
    title: "Programme Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Programme Co-Chair",
    image: "./committee/Prof. Uditha Ratnayake.svg",
    country: "LK",
    email: "udithaw@ou.ac.lk",
    category: "Programme Committee",
  },
  {
    name: "Dr. Lochandaka Ranathunga",
    title: "Programme Co-Chair",
    affiliation: "University of Moratuwa",
    role: "Programme Co-Chair",
    image: "./committee/default-avatar.png",
    country: "LK",
    email: "lochandaka@uom.lk",
    category: "Programme Committee",
  },
  {
    name: "Prof. Shiromi Karunaratne",
    title: "Programme Co-Chair",
    affiliation: "SLIIT",
    role: "Programme Co-Chair",
    image: "./committee/default-avatar.png",
    country: "LK",
    email: "shiromi.k@sliit.lk",
    category: "Programme Committee",
  },
  {
    name: "Dr. Yohan Mahagamage",
    title: "Programme Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Programme Co-Chair",
    image: "./committee/default-avatar.png",
    country: "LK",
    email: "mgyma@ou.ac.lk",
    category: "Programme Committee",
  },
  {
    name: "Dr. Chamila Dias",
    title: "Programme Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Programme Co-Chair",
    image: "./committee/Dr.-Chamila-Dias.svg",
    country: "LK",
    email: "sndia@ou.ac.lk",
    category: "Programme Committee",
  },
  // Publication Chair & Co-Chairs
  {
    name: "Prof. Meththika Vithanage",
    title: "Publication Chair",
    affiliation: "University of Sri Jayewardenepura",
    role: "Publication Chair",
    image: "./committee/Prof.Meththika Vithanage.svg",
    country: "LK",
    email: "meththika@sjp.ac.lk",
    category: "Publication Committee",
  },
  {
    name: "Dr. Chandana Jayawardena",
    title: "Publication Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publication Chair",
    image: "./committee/Dr-G.M.C.P.-Jayawardana.svg",
    country: "LK",
    email: "gmjay@ou.ac.lk",
    category: "Publication Committee",
  },
  {
    name: "Dr. Uthpala Jayawardena",
    title: "Publication Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publication Co-Chair",
    image: "./committee/Dr. Uthpala Jayawardena.svg",
    country: "LK",
    email: "uajay@ou.ac.lk",
    category: "Publication Committee",
  },
  {
    name: "Prof. Pradeep Kalansooriya",
    title: "Publication Co-Chair",
    affiliation: "General Sir John Kotelawala Defence University",
    role: "Publication Co-Chair",
    image: "./committee/default-avatar.png",
    country: "LK",
    email: "pradeepkalansooriya@kdu.ac.lk",
    category: "Publication Committee",
  },
  {
    name: "Dr. Rukshima Dabare",
    title: "Publication Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publication Co-Chair",
    image: "./committee/Dr. Rukshima dabare.svg",
    country: "LK",
    email: "ptdab@ou.ac.lk",
    category: "Publication Committee",
  },
  {
    name: "Dr. Supunmalie",
    title: "Publication Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publication Co-Chair",
    image: "./committee/Dr. Supunmalie.svg",
    country: "LK",
    email: "supunmali@ou.ac.lk",
    category: "Publication Committee",
  },
  // Financial & Registration Chair
  {
    name: "Eng. Sampath Wickramanayake",
    title: "Financial & Registration Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Financial & Registration Chair",
    image: "./committee/Eng. Sampath Wickramasinghe.svg",
    country: "LK",
    email: "dswic@ou.ac.lk",
    category: "Financial Committee",
  },
  // International Relation Chair
  {
    name: "Prof. Damith Wickramanayake",
    title: "International Relation Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "International Relation Chair",
    image: "./committee/Prof. Damith Wickramanayake.svg",
    country: "LK",
    email: "dawic@ou.ac.lk",
    category: "International Relations",
  },
  // Publicity Chair
  {
    name: "Dr. Gehan Anthonys",
    title: "Publicity Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publicity Chair",
    image: "./committee/Eng.-Dr.-G.-Anthonys.svg",
    country: "LK",
    email: "ganth@ou.ac.lk",
    category: "Publicity Committee",
  },
  // Special Session Chair
  {
    name: "Dr. Menaka Ranasinghe",
    title: "Special Session Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Special Session Chair",
    image: "./committee/Dr. Menaka Ranasinghe.svg",
    country: "LK",
    email: "ddran@ou.ac.lk",
    category: "Special Sessions",
  },
  // Workshop Chair
  {
    name: "Dr. Ganila Paranavithana",
    title: "Workshop Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Workshop Chair",
    image: "./committee/Dr.-G.-N.-Paranavithana.svg",
    country: "LK",
    email: "gnpar@ou.ac.lk",
    category: "Workshop Committee",
  },
  // Awards Chair
  {
    name: "Eng. Hemali Pasquel",
    title: "Awards Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Awards Chair",
    image: "./committee/Mrs. Hemalie Pasquel.svg",
    country: "LK",
    email: "hpasq@ou.ac.lk",
    category: "Awards Committee",
  },
  // Poster Session Chair
  {
    name: "Mr. N.M. Siyad",
    title: "Workshop Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Workshop Chair",
    image: "./committee/N.M. Siyad.svg",
    country: "LK",
    email: "nmsiy@ou.ac.lk",
    category: "Workshop Committee",
  },
  // Local Organizing Chairs
  {
    name: "Dr. K.A.C. Udayakumar",
    title: "Local Organizing Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Local Organizing Chair",
    image: "./committee/Dr.Udayakumar.svg",
    country: "LK",
    email: "kauda@ou.ac.lk",
    category: "Local Organizing Committee",
  },
  {
    name: "Mr. Kasun Araththanage",
    title: "Local Organizing Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Local Organizing Chair",
    image: "./committee/Mr. Kasun-Aratthanage.svg",
    country: "LK",
    email: "kdara@ou.ac.lk",
    category: "Local Organizing Committee",
  },
  {
    name: "Ms. J. Kirushika",
    title: "Local Organizing Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Local Organizing Chair",
    image: "./committee/Ms.-J.-Kirushika.svg",
    country: "LK",
    email: "jkiru@ou.ac.lk",
    category: "Local Organizing Committee",
  },
  {
    name: "Mr. Saliya Wickramasinghe",
    title: "Local Organizing Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Local Organizing Chair",
    image: "./committee/Mr. Saliya Wickramasinghe.svg",
    country: "LK",
    email: "bmwic@ou.ac.lk",
    category: "Local Organizing Committee",
  },
  // Conference Secretaries
  {
    name: "Eng. S. Himanujahn",
    title: "Conference Secretary",
    affiliation: "University of Sri Jayewardenepura",
    role: "Conference Secretary",
    image: "./committee/Eng. S Himanujahn.svg",
    country: "LK",
    email: "himanujahn@sjp.ac.lk",
    category: "Conference Secretariat",
  },
  {
    name: "Eng. Zeena Weerabangsa",
    title: "Conference Secretary",
    affiliation: "The Open University of Sri Lanka",
    role: "Conference Secretary",
    image: "./committee/default-avatar.png",
    country: "LK",
    email: "mzwee@ou.ac.lk",
    category: "Conference Secretariat",
  },
  // Web Committee
  {
    name: "Eng. Janaka Basnayake",
    title: "Web Committee Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Web Committee Chair",
    image: "./committee/Eng.-CJ-Basnayakege.svg",
    country: "LK",
    email: "cjbas@ou.ac.lk",
    category: "Web Committee",
  },
  {
    name: "Mr. Mayura Alahakoon",
    title: "Deputy Web Committee Lead",
    affiliation: "The Open University of Sri Lanka",
    role: "Deputy Web Committee Lead",
    image: "./committee/Mayura.svg",
    country: "LK",
    category: "Web Committee",
  },
  {
    name: "Mr. Chanaka Weerasekara",
    title: "Web Committee Member",
    affiliation: "The Open University of Sri Lanka",
    role: "Web Committee Member",
    image: "./committee/default-avatar.png",
    country: "LK",
    email: "wpcha@ou.ac.lk",
    category: "Web Committee",
  },
];
---

<BaseLayout
  title="Organizing Committee | ICPIES 2025"
  description="Meet the organizing committee of the International Conference on Plastics, Innovations and Environmental Sustainability"
>
  <div class="relative bg-gradient-to-b from-[#1A7A64]/5 to-white rounded-2xl">
    <div class="absolute inset-0">
      <div class="absolute inset-y-0 left-0 w-1/2"></div>
    </div>
    <div class="relative max-w-7xl mx-auto py-24 px-4 sm:py-32 sm:px-6 lg:px-8">
      <h1
        class="text-4xl md:text-5xl font-bold text-[#2C3E50] text-center mb-4"
      >
        Organizing Committee
      </h1>
      <div class="mt-8 flex justify-center">
        <div
          class="h-1 w-32 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full"
        >
        </div>
      </div>
      <p class="mt-4 max-w-3xl mx-auto text-xl text-gray-500 text-center">
        Meet the dedicated team behind ICPIES 2025, bringing together experts
        from academia, industry, and policy.
      </p>
    </div>
  </div>
  <section class="py-2">
    <Container>
      <div class="space-y-16">
        {
          categories.map((category) => {
            const categoryMembers = members.filter(
              (member) => member.category === category
            );
            if (categoryMembers.length === 0) return null;

            return (
              <div
                id={category.toLowerCase().replace(/\s+/g, "-")}
                class="scroll-mt-24"
              >
                <h2 class="text-3xl font-bold text-gray-800 mb-8 text-center after:content-[''] after:block after:w-24 after:h-1 after:bg-emerald-500 after:mt-4 after:mx-auto">
                  {category}
                </h2>

                <div class="flex justify-center">
                  <div
                    class={`grid gap-8 ${
                      categoryMembers.length === 1
                        ? "grid-cols-1 max-w-lg"
                        : categoryMembers.length === 2
                          ? "grid-cols-1 sm:grid-cols-2 max-w-3xl"
                          : categoryMembers.length === 3
                            ? "grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 max-w-5xl"
                            : "grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 max-w-7xl"
                    }`}
                  >
                    {categoryMembers.map((member) => (
                      <div
                        class="card-container w-full h-full"
                        style="max-width: 300px;"
                      >
                        <CommitteeMemberCard {...member} />
                      </div>
                    ))}
                  </div>
                </div>
              </div>
            );
          })
        }
      </div>
    </Container>
  </section>

  <!-- Back to top button -->
  <div class="fixed bottom-8 right-8 z-30">
    <button
      id="backToTop"
      class="bg-emerald-600 text-white rounded-full p-3 shadow-lg hover:bg-emerald-700 transition-all"
      aria-label="Back to top"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
      </svg>
    </button>
  </div>
</BaseLayout>

<style>
  /* Hide scrollbar for Chrome, Safari and Opera */
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Hide scrollbar for IE, Edge and Firefox */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }

  /* Committee card hover effects */
  .committee-card {
    transition: all 0.3s ease;
  }

  .committee-card:hover {
    transform: translateY(-5px);
  }
</style>

<script>
  // Back to top button functionality
  document.addEventListener("DOMContentLoaded", function () {
    const backToTopButton = document.getElementById("backToTop");

    // Show/hide button based on scroll position
    window.addEventListener("scroll", () => {
      if (window.scrollY > 300) {
        backToTopButton.classList.add("opacity-100");
        backToTopButton.classList.remove("opacity-0");
      } else {
        backToTopButton.classList.add("opacity-0");
        backToTopButton.classList.remove("opacity-100");
      }
    });

    // Equal height cards function
    document.addEventListener("DOMContentLoaded", function () {
      // Function to equalize card heights within each category
      function equalizeCardHeights() {
        document
          .querySelectorAll('[id^="conference-chair"], [id^="advisory-board"]')
          .forEach((category) => {
            const cards = category.querySelectorAll(".group");
            if (cards.length === 0) return;

            // Reset heights
            cards.forEach((card) => (card.style.height = ""));

            // Find max height
            let maxHeight = 0;
            cards.forEach((card) => {
              maxHeight = Math.max(maxHeight, card.offsetHeight);
            });

            // Apply max height to all cards
            cards.forEach((card) => (card.style.height = `${maxHeight}px`));
          });
      }

      // Run on load and resize
      equalizeCardHeights();
      window.addEventListener("resize", equalizeCardHeights);
    });

    // Scroll to top when clicked
    backToTopButton.addEventListener("click", function () {
      window.scrollTo({
        top: 0,
        behavior: "smooth",
      });
    });

    // Highlight active category in navigation
    const observerOptions = {
      root: null,
      rootMargin: "0px",
      threshold: 0.1,
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        const id = entry.target.getAttribute("id");
        if (entry.isIntersecting) {
          document.querySelectorAll(".sticky a").forEach((link) => {
            link.classList.remove("bg-emerald-100", "text-emerald-800");
          });
          document
            .querySelector(`.sticky a[href="#${id}"]`)
            .classList.add("bg-emerald-100", "text-emerald-800");
        }
      });
    }, observerOptions);

    document.querySelectorAll("section > div[id]").forEach((section) => {
      observer.observe(section);
    });
  });
</script>
