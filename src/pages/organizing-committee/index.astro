---
import BaseLayout from "@/layouts/BaseLayout.astro";

interface CommitteeMember {
  name: string;
  title?: string;
  affiliation?: string;
  role?: string;
  image?: string;
  country?: string;
  email?: string;
  linkedin?: string;
  category?: string;
  phone?: string;
}

const members: CommitteeMember[] = [
  // Conference Chairs
  {
    name: "Prof. Bandunee Athapattu",
    title: "Conference Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Conference Chair",
    image: "./committee/Prof. Bandunee Athapattu.jpg",
    country: "LK",
    email: "bcliy@ou.ac.lk",
    category: "Conference Chair"
  },
  {
    name: "Prof. Jagath Manatunge",
    title: "Conference Chair",
    affiliation: "University of Moratuwa",
    role: "Conference Chair",
    image: "./committee/Prof. Jagath Manatunge.jpg",
    country: "LK",
    email: "manatunge@uom.lk",
    category: "Conference Chair"
  },
  // TPC Chair
  {
    name: "Dr. L.S.K. Udugama",
    title: "TPC Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Technical Program Committee Chair",
    image: "./committee/Dr. L.S.K. Udugama.jpg",
    country: "LK",
    email: "lsudu@ou.ac.lk",
    category: "Technical Program Committee"
  },
  // TPC Co-Chairs
  {
    name: "Prof. Indika Perera",
    title: "TPC Co-Chair",
    affiliation: "University of Moratuwa",
    role: "Technical Program Committee Co-Chair",
    image: "./committee/Prof. Indika Perera.jpg",
    country: "LK",
    email: "indikaperera@uom.lk",
    category: "Technical Program Committee"
  },
  {
    name: "Mr. Janaka Wijesekera",
    title: "TPC Co-Chair",
    affiliation: "",
    role: "Technical Program Committee Co-Chair",
    image: "./committee/default-avatar.jpg",
    country: "LK",
    category: "Technical Program Committee"
  },
  // Organizing Committee Chair
  {
    name: "Dr. Maneesha Caldera",
    title: "Organizing Committee Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Organizing Committee Chair",
    image: "./committee/Dr.-H.M.M.CALDERA.jpeg",
    country: "LK",
    email: "hmcal@ou.ac.lk",
    category: "Organizing Committee"
  },
  // Programme Co-Chairs
  {
    name: "Prof. Uditha Ratnayake",
    title: "Programme Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Programme Co-Chair",
    image: "./committee/Prof. Uditha Ratnayake.jpg",
    country: "LK",
    email: "udithaw@ou.ac.lk",
    category: "Programme Committee"
  },
  {
    name: "Dr. Lochandaka Ranathunga",
    title: "Programme Co-Chair",
    affiliation: "University of Moratuwa",
    role: "Programme Co-Chair",
    image: "./committee/default-avatar.jpg",
    country: "LK",
    email: "lochandaka@uom.lk",
    category: "Programme Committee"
  },
  {
    name: "Prof. Shiromi Karunaratne",
    title: "Programme Co-Chair",
    affiliation: "SLIIT",
    role: "Programme Co-Chair",
    image: "./committee/default-avatar.jpg",
    country: "LK",
    email: "shiromi.k@sliit.lk",
    category: "Programme Committee"
  },
  {
    name: "Dr. Yohan Mahagamage",
    title: "Programme Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Programme Co-Chair",
    image: "./committee/Dr. Yohan Mahagamage.jpg",
    country: "LK",
    email: "mgyma@ou.ac.lk",
    category: "Programme Committee"
  },
  {
    name: "Dr. Chamila Dias",
    title: "Programme Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Programme Co-Chair",
    image: "./committee/Dr.-Chamila-Dias.jpg",
    country: "LK",
    email: "sndia@ou.ac.lk",
    category: "Programme Committee"
  },
  // Publication Chair & Co-Chairs
  {
    name: "Prof. Meththika Vithanage",
    title: "Publication Chair",
    affiliation: "University of Sri Jayewardenepura",
    role: "Publication Chair",
    image: "./committee/Prof. Meththika Vithanage.jpg",
    country: "LK",
    email: "meththika@sjp.ac.lk",
    category: "Publication Committee"
  },
  {
    name: "Dr. Chandana Jayawardena",
    title: "Publication Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publication Chair",
    image: "./committee/Dr-G.M.C.P.-Jayawardana.jpg",
    country: "LK",
    email: "gmjay@ou.ac.lk",
    category: "Publication Committee"
  },
  {
    name: "Dr. Uthpala Jayawardena",
    title: "Publication Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publication Co-Chair",
    image: "./committee/Dr. Uthpala Jayawardena.jpg",
    country: "LK",
    email: "uajay@ou.ac.lk",
    category: "Publication Committee"
  },
  {
    name: "Prof. Pradeep Kalansooriya",
    title: "Publication Co-Chair",
    affiliation: "General Sir John Kotelawala Defence University",
    role: "Publication Co-Chair",
    image: "./committee/default-avatar.jpg",
    country: "LK",
    email: "pradeepkalansooriya@kdu.ac.lk",
    category: "Publication Committee"
  },
  {
    name: "Dr. Rukshima Dabare",
    title: "Publication Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publication Co-Chair",
    image: "./committee/Dr. Rukshima dabare.jpg",
    country: "LK",
    email: "ptdab@ou.ac.lk",
    category: "Publication Committee"
  },
  {
    name: "Dr. Supunmalie",
    title: "Publication Co-Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publication Co-Chair",
    image: "./committee/Dr. Supunmalie.jpg",
    country: "LK",
    email: "supunmali@ou.ac.lk",
    category: "Publication Committee"
  },
  // Financial & Registration Chair
  {
    name: "Eng. Sampath Wickramanayake",
    title: "Financial & Registration Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Financial & Registration Chair",
    image: "./committee/Eng. Sampath Wickramasinghe.jpg",
    country: "LK",
    email: "dswic@ou.ac.lk",
    category: "Financial Committee"
  },
  // International Relation Chair
  {
    name: "Prof. Damith Wickramanayake",
    title: "International Relation Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "International Relation Chair",
    image: "./committee/Prof. Damith Wickramanayake.jpg",
    country: "LK",
    email: "dawic@ou.ac.lk",
    category: "International Relations"
  },
  // Publicity Chair
  {
    name: "Dr. Gehan Anthonys",
    title: "Publicity Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Publicity Chair",
    image: "./committee/Eng.-Dr.-G.-Anthonys.jpg",
    country: "LK",
    email: "ganth@ou.ac.lk",
    category: "Publicity Committee"
  },
  // Special Session Chair
  {
    name: "Dr. Menaka Ranasinghe",
    title: "Special Session Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Special Session Chair",
    image: "./committee/Dr. Menaka Ranasinghe.png",
    country: "LK",
    email: "ddran@ou.ac.lk",
    category: "Special Sessions"
  },
  // Workshop Chair
  {
    name: "Dr. Ganila Paranavithana",
    title: "Workshop Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Workshop Chair",
    image: "./committee/Dr.-G.-N.-Paranavithana.jpg",
    country: "LK",
    email: "gnpar@ou.ac.lk",
    category: "Workshop Committee"
  },
  // Awards Chair
  {
    name: "Eng. Hemali Pasquel",
    title: "Awards Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Awards Chair",
    image: "./committee/Mrs. Hemalie Pasquel.png",
    country: "LK",
    email: "hpasq@ou.ac.lk",
    category: "Awards Committee"
  },
  // Poster Session Chair
  {
    name: "Mr. N.M. Siyad",
    title: "Poster Session Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Poster Session Chair",
    image: "./committee/N.M. Siyad.jpeg",
    country: "LK",
    email: "nmsiy@ou.ac.lk",
    category: "Poster Session Committee"
  },
  // Local Organizing Chairs
  {
    name: "Dr. K.A.C. Udayakumar",
    title: "Local Organizing Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Local Organizing Chair",
    image: "./committee/Dr.Udayakumar.jpg",
    country: "LK",
    email: "kauda@ou.ac.lk",
    category: "Local Organizing Committee"
  },
  {
    name: "Mr. Kasun Araththanage",
    title: "Local Organizing Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Local Organizing Chair",
    image: "./committee/Mr. Kasun-Aratthanage.jpg",
    country: "LK",
    email: "kdara@ou.ac.lk",
    category: "Local Organizing Committee"
  },
  {
    name: "Ms. J. Kirushika",
    title: "Local Organizing Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Local Organizing Chair",
    image: "./committee/Ms.-J.-Kirushika.jpg",
    country: "LK",
    email: "jkiru@ou.ac.lk",
    category: "Local Organizing Committee"
  },
  {
    name: "Mr. Saliya Wickramasinghe",
    title: "Local Organizing Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Local Organizing Chair",
    image: "./committee/Mr. Saliya Wickramasinghe.jpg",
    country: "LK",
    email: "bmwic@ou.ac.lk",
    category: "Local Organizing Committee"
  },
  // Conference Secretaries
  {
    name: "Eng. S. Himanujahn",
    title: "Conference Secretary",
    affiliation: "University of Sri Jayewardenepura",
    role: "Conference Secretary",
    image: "./committee/Eng. S Himanujahn.jpeg",
    country: "LK",
    email: "himanujahn@sjp.ac.lk",
    category: "Conference Secretariat"
  },
  {
    name: "Eng. Zeena Weerabangsa",
    title: "Conference Secretary",
    affiliation: "The Open University of Sri Lanka",
    role: "Conference Secretary",
    image: "./committee/default-avatar.jpg",
    country: "LK",
    email: "mzwee@ou.ac.lk",
    category: "Conference Secretariat"
  },
  // Web Committee
  {
    name: "Eng. Janaka Basnayake",
    title: "Web Committee Chair",
    affiliation: "The Open University of Sri Lanka",
    role: "Web Committee Chair",
    image: "./committee/Eng.-CJ-Basnayakege.jpg",
    country: "LK",
    email: "cjbas@ou.ac.lk",
    category: "Web Committee"
  },
  {
    name: "Mr. Mayura Alahakoon",
    title: "Deputy Web Committee Lead",
    affiliation: "The Open University of Sri Lanka",
    role: "Deputy Web Committee Lead",
    image: "./committee/Mayura.jpg",
    country: "LK",
    category: "Web Committee"
  },
  {
    name: "Mr. Chanaka Weerasekara",
    title: "Web Committee Member",
    affiliation: "The Open University of Sri Lanka",
    role: "Web Committee Member",
    image: "./committee/default-avatar.jpg",
    country: "LK",
    email: "wpcha@ou.ac.lk",
    category: "Web Committee"
  },
  {
    name: "Eng. Shalindu Andradi",
    title: "Web Committee Member",
    affiliation: "The Open University of Sri Lanka",
    role: "Web Committee Member",
    image: "./committee/default-avatar.jpg",
    country: "LK",
    email: "dmand@ou.ac.lk",
    category: "Web Committee"
  },
  // Advisory Board
  {
    name: "Prof. S Vasanthapriyan",
    title: "Advisory Board Chair",
    affiliation: "Sabaragamuwa University of Sri Lanka",
    role: "Advisory Board Chair",
    image: "./committee/Prof. S Vasanthapriyan.jpg",
    country: "LK",
    email: "priyan@foc.sab.ac.lk",
    category: "Advisory Board"
  },
  {
    name: "Prof. Kazunari Sei",
    title: "Advisory Board Member",
    affiliation: "University of Toyama",
    role: "International Advisor",
    image: "./committee/Prof. Kazunari Sei.png",
    country: "JP",
    category: "Advisory Board"
  },
  {
    name: "Prof. Masafumi Tateda",
    title: "Advisory Board Member",
    affiliation: "",
    role: "International Advisor",
    image: "./committee/default-avatar.jpg",
    country: "JP",
    category: "Advisory Board"
  },
  {
    name: "Mrs. Shalene",
    title: "Advisory Board Member",
    affiliation: "",
    role: "Advisory Board Member",
    image: "./committee/default-avatar.jpg",
    country: "LK",
    category: "Advisory Board"
  },
  {
    name: "Dr. Prasanna",
    title: "Advisory Board Member",
    affiliation: "SLIIT",
    role: "Advisory Board Member",
    image: "./committee/default-avatar.jpg",
    country: "LK",
    category: "Advisory Board"
  },
  {
    name: "Prof. Sunil Herath",
    title: "Advisory Board Member",
    affiliation: "",
    role: "Advisory Board Member",
    image: "./committee/Prof.Sunil Herath.jpg",
    country: "LK",
    category: "Advisory Board"
  },
  {
    name: "Prof. Mahesh Jayaweera",
    title: "Advisory Board Member",
    affiliation: "University of Moratuwa",
    role: "Advisory Board Member",
    image: "./committee/Prof.Mahesh Jayaweera.jpg",
    country: "LK",
    email: "mahesh@uom.lk",
    category: "Advisory Board"
  }
];

const groupedMembers = members.reduce((acc, member) => {
  const cat = member.category || "Uncategorized";
  if (!acc[cat]) acc[cat] = [];
  acc[cat].push(member);
  return acc;
}, {} as Record<string, CommitteeMember[]>);

/** Define the order in which categories should appear */
const categoryOrder = [
  "Advisory Board",
  "Conference Chair",
  "Conference Secretariat",
  "Technical Program Committee",
  "Organizing Committee",
  "Programme Committee",
  "Publication Committee",
  "Financial Committee",
  "International Relations",
  "Publicity Committee",
  "Special Sessions",
  "Workshop Committee",
  "Local Organizing Committee",
  "Awards Committee",
  "Poster Session Committee",
  "Web Committee"
];

/** Sort the categories according to our preferred order */
const sortedCategories = Object.keys(groupedMembers).sort((a, b) => {
  const indexA = categoryOrder.indexOf(a);
  const indexB = categoryOrder.indexOf(b);
  return (indexA === -1 ? 999 : indexA) - (indexB === -1 ? 999 : indexB);
});

/** Provide a default avatar if no image is provided */
const defaultAvatar = "./committee/default-avatar.jpg";
function getImagePath(path?: string) {
  return path || defaultAvatar;
}

/** Convert country code (e.g. "LK") to an emoji flag */
function getFlagEmoji(countryCode?: string): string {
  if (!countryCode) return "";
  const codePoints = countryCode
    .toUpperCase()
    .split("")
    .map(char => 127397 + char.charCodeAt(0));
  return String.fromCodePoint(...codePoints);
}
/** Get appropriate grid layout based on number of members */
function getGridLayout(count: number): string {
  // Keep consistent card width regardless of count
  if (count === 1) return "grid-cols-1 sm:grid-cols-1 md:grid-cols-1 lg:grid-cols-1 gap-8 max-w-2xl mx-auto";
  if (count === 2) return "grid-cols-1 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8 max-w-4xl mx-auto";
  if (count === 3) return "grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-8 max-w-5xl mx-auto";
  if (count <= 6) return "grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-6xl mx-auto";
  return "grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-8 max-w-7xl mx-auto";
}
/** Page Title & Description */
const pageTitle = "ICPIES 2025 Organizing Committee";
const pageDescription =
  "Meet our dedicated team bringing together experts from academia, industry, and policy around the globe.";
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <!-- Hero Section with Wave Background -->
  <div class="relative overflow-hidden bg-emerald-50">
    <div class="absolute inset-0 opacity-20">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320" class="absolute bottom-0 w-full">
        <path fill="#047857" fill-opacity="1" d="M0,224L48,224C96,224,192,224,288,197.3C384,171,480,117,576,117.3C672,117,768,171,864,170.7C960,171,1056,117,1152,101.3C1248,85,1344,107,1392,117.3L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
      </svg>
    </div>

    <div class="relative px-4 py-24 sm:px-6 lg:px-8 max-w-6xl mx-auto text-center z-10">
      <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-6">
        Organizing Committee
      </h1>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto">
        {pageDescription}
      </p>
      <div class="mt-8 w-20 h-1.5 bg-emerald-500 mx-auto rounded-full"></div>
    </div>
  </div>

  <!-- Category Tabs Navigation -->
  <div class="sticky top-0 z-50 bg-white shadow-sm">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="overflow-x-auto py-3">
        <nav class="flex space-x-1 md:space-x-2 justify-start md:justify-center min-w-max">
          {sortedCategories.map((category) => (
            <a
              href={`#${category.toLowerCase().replace(/\s+/g, "-")}`}
              class="px-3 py-2 text-sm font-medium rounded-md transition-all
                    hover:bg-emerald-50 hover:text-emerald-700
                    focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2"
            >
              {category}
            </a>
          ))}
        </nav>
      </div>
    </div>
  </div>

  <!-- Committee Members By Category -->
  <div class="py-16 bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      {sortedCategories.map((category) => {
        const members = groupedMembers[category];
        return (
          <section
            id={category.toLowerCase().replace(/\s+/g, "-")}
            class="mb-24 scroll-mt-24 group"
            data-category={category}
          >
            <div class="mb-12">
              <h2 class="text-3xl font-bold text-center text-gray-900">
                <span class="relative inline-block">
                  {category}
                  <span class="absolute -bottom-2 left-0 right-0 h-1 bg-emerald-500 rounded transform origin-left transition-transform duration-500 ease-in-out scale-x-0 group-hover:scale-x-100"></span>
                </span>
              </h2>
            </div>

            <div class={`grid grid-cols-1 gap-8 ${getGridLayout(members.length)}`}>
              {members.map((member, idx) => (
                <div
                  class="committee-card bg-white rounded-lg shadow-md overflow-hidden transition-all duration-300 transform hover:-translate-y-1 hover:shadow-lg"
                  data-aos="fade-up"
                  data-aos-delay={idx * 100}
                >
                  <div class="relative h-2 bg-emerald-500">
                    {member.country && (
                      <div class="absolute top-2 right-3 w-8 h-8 bg-white rounded-full flex items-center justify-center shadow-md">
                        <span class="text-lg">{getFlagEmoji(member.country)}</span>
                      </div>
                    )}
                  </div>

                  <div class="grid grid-cols-12 h-[220px]">
                    <!-- Left side - Image -->
                    <div class="col-span-4 bg-gray-100">
                      <div class="h-full w-full overflow-hidden">
                        <img
                          src={getImagePath(member.image)}
                          alt={member.name}
                          class="h-full w-full object-cover"
                          loading="lazy"
                          onerror="this.src='./committee/default-avatar.jpg'"
                        />
                      </div>
                    </div>

                    <!-- Right side - Info -->
                    <div class="col-span-8 p-4 flex flex-col justify-between">
                      <div>
                        <h3 class="text-lg font-bold text-gray-900 line-clamp-1 mb-1" title={member.name}>
                          {member.name}
                        </h3>

                        {member.role && (
                          <div class="mb-2">
                            <span class="px-2 py-1 text-xs font-medium bg-emerald-100 text-emerald-800 rounded-full">
                              {member.role}
                            </span>
                          </div>
                        )}

                        {member.affiliation && (
                          <p class="text-gray-600 text-sm line-clamp-2 mb-2" title={member.affiliation}>
                            <svg xmlns="http://www.w3.org/2000/svg" class="inline h-4 w-4 mr-1 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" />
                            </svg>
                            {member.affiliation}
                          </p>
                        )}
                      </div>

                      <div class="mt-auto border-t border-gray-100 pt-3">
                        <div class="flex flex-wrap gap-x-4 gap-y-2">
                          {member.email && (
                            <a
                              href={`mailto:${member.email}`}
                              class="text-emerald-600 hover:text-emerald-800 text-xs flex items-center"
                              title={member.email}
                            >
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                              </svg>
                              <span class="line-clamp-1 max-w-[140px]">Email</span>
                            </a>
                          )}

                          {member.linkedin && (
                            <a
                              href={member.linkedin}
                              target="_blank"
                              rel="noopener noreferrer"
                              class="text-blue-600 hover:text-blue-800 text-xs flex items-center"
                              title="View LinkedIn Profile"
                            >
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                              </svg>
                              <span>LinkedIn</span>
                            </a>
                          )}

                          {member.phone && (
                            <a
                              href={`tel:${member.phone}`}
                              class="text-gray-600 hover:text-gray-800 text-xs flex items-center"
                              title={member.phone}
                            >
                              <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                              </svg>
                              <span>Phone</span>
                            </a>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              ))}
            </div>
          </section>
        );
      })}
    </div>
  </div>

  <!-- Back to Top Button -->
  <button
    id="back-to-top"
    class="fixed bottom-8 right-8 p-3 rounded-full bg-emerald-600 text-white shadow-lg opacity-0 invisible transition-all duration-300 hover:bg-emerald-700 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2"
    aria-label="Back to top"
  >
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
    </svg>
  </button>
</BaseLayout>

<style>
  /* Fixed height card styling */
  .committee-card {
    height: 220px;
    width: 100%; /* Take full width of grid cell */
    display: flex;
    flex-direction: column;
  }

  /* Text truncation utilities */
  .line-clamp-1 {
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  /* Fade-in animation */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .committee-card {
    animation: fadeInUp 0.6s ease-out forwards;
    animation-delay: var(--delay, 0ms);
    opacity: 0;
  }

  /* Ensure flag badges are properly positioned */
  .committee-card .relative {
    position: relative;
    z-index: 10;
  }

  /* Image fallback styling */
  img[src="./committee/default-avatar.jpg"] {
    object-fit: contain;
    padding: 0.5rem;
    background-color: #f3f4f6;
  }

  /* Active navigation item styling */
  .nav-active {
    background-color: rgba(16, 185, 129, 0.1);
    color: rgb(4, 120, 87);
  }

  /* Responsive adjustments for mobile */
  @media (min-width: 640px) {
    .committee-card {
      min-width: 320px;
      max-width: 480px;
      margin: 0 auto; /* Center when alone in grid cell */
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Set animation delays
    const cards = document.querySelectorAll('.committee-card');
    cards.forEach((card, index) => {
      card.style.setProperty('--delay', `${index % 9 * 100}ms`);
    });

    // Back to top button functionality
    const backToTopButton = document.getElementById('back-to-top');

    if (backToTopButton) {
      window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
          backToTopButton.classList.remove('opacity-0', 'invisible');
          backToTopButton.classList.add('opacity-100', 'visible');
        } else {
          backToTopButton.classList.add('opacity-0', 'invisible');
          backToTopButton.classList.remove('opacity-100', 'visible');
        }
      });

      backToTopButton.addEventListener('click', () => {
        window.scrollTo({
          top: 0,
          behavior: 'smooth'
        });
      });
    }

    // Highlight active category in navigation
    const navLinks = document.querySelectorAll('nav a');
    const sections = document.querySelectorAll('section[id]');

    function highlightCurrentSection() {
      let currentSection = '';
      let closestDistance = Number.MAX_VALUE;

      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.offsetHeight;
        const distance = Math.abs(window.scrollY - (sectionTop - 100));

        if (distance < closestDistance) {
          closestDistance = distance;
          currentSection = `#${section.id}`;
        }
      });

      navLinks.forEach(link => {
        if (link.getAttribute('href') === currentSection) {
          link.classList.add('nav-active');
        } else {
          link.classList.remove('nav-active');
        }
      });
    }

    window.addEventListener('scroll', highlightCurrentSection);
    highlightCurrentSection(); // Initial check

    // Handle image load errors
    const images = document.querySelectorAll('img');
    images.forEach(img => {
      img.addEventListener('error', function() {
        this.src = './committee/default-avatar.jpg';
      });
    });
  });
</script>
